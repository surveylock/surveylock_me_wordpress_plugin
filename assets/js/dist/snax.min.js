(()=>{const l={loaderContainerSelector:"#slm-loader-container-snax",loaderHolderSelector:".slm-loader-holder",loadingClass:"slm-loading",loaderCoverClass:"slm-cover",ctaContainerSelector:"#slm-cta-container-snax",ctaHolderSelector:".slm-cta-holder",ctaButtonSelector:"[data-slm-cta]",surveyBlockClass:"slm-snax-survey-holder",additionalElementsSelector:".g1-newsletter",resultsSelector:".snax-quiz-results",surveyIframeSelector:slm.getSelector("LnN1cnZhdGEtZWxlbWVudC1jb250YWluZXIgaWZyYW1l"),heightFixed:!1};jQuery(function(a){a(document).on("resultsShown",function(e){const o=a(e.target),t=o.find("> .quiz > .snax-quiz-questions-wrapper");o.length&&(((t,e,o)=>{const a={_interviewStarted:!1,_surveyBlock:!1,_initSurveyBlock:()=>{!1===a._surveyBlock&&(a._surveyBlock=t("<div />",{class:l.surveyBlockClass}).insertAfter(e))},getSnaxContainer:()=>e,getSurveyBlock:()=>(a._initSurveyBlock(),a._surveyBlock),showCTA:e=>{a.removeCTA();const o=t(l.ctaContainerSelector).find(l.ctaHolderSelector).clone();a.getSurveyBlock().prepend(o),a.removeSurveyLoader(),o.on("click",l.ctaButtonSelector,e)},removeCTA:(e=!1)=>{const o=a.getSurveyBlock().find(l.ctaHolderSelector);e?o.fadeOut("fast",o.remove):o.remove()},hideQuestions:()=>{o.hide()},hideSnaxElements:()=>{a.getSnaxContainer().fadeOut("fast",()=>{t([document.documentElement,document.body]).animate({scrollTop:Math.max(a.getSurveyBlock().offset().top-150,0)},1e3)}),t(l.additionalElementsSelector).fadeOut("fast")},addSurveyLoader:(e="")=>{a.removeSurveyLoader(),a.getSurveyBlock().prepend(t(l.loaderContainerSelector).find(l.loaderHolderSelector).clone()).addClass(l.loadingClass).addClass(e)},removeSurveyLoader:(e=!1)=>{const o=a.getSurveyBlock().find(l.loaderHolderSelector);e?o.fadeOut("fast",()=>{a.getSurveyBlock().removeClass(l.loadingClass).removeClass(l.loaderCoverClass),o.remove()}):(a.getSurveyBlock().removeClass(l.loadingClass).removeClass(l.loaderCoverClass),o.remove()),a.getSurveyBlock().removeClass(l.loadingClass).removeClass(l.loaderCoverClass).find(l.loaderHolderSelector).remove()},showResults:(e="")=>{a.removeCTA(),a.getSurveyBlock().addClass(e),a.addSurveyLoader(),a.getSurveyBlock().fadeOut("fast",()=>{a.getSnaxContainer().find(l.resultsSelector).addClass("slm-snax-show"),a.getSnaxContainer().hide().fadeIn("fast"),t(l.additionalElementsSelector).fadeIn("fast"),a.getSurveyBlock().remove()})},fixSurveyHeight:()=>{const e=a.getSurveyBlock().find(l.surveyIframeSelector);l.heightFixed||(a.getSurveyBlock().height(700),parseInt(e.height(),10)<800&&(e.height("700"),l.heightFixed=!0))},showInterview:()=>{!1===a._interviewStarted&&(a.removeCTA(),a.removeSurveyLoader(!0),a.fixSurveyHeight(),setTimeout(a.fixSurveyHeight,600),setTimeout(a.fixSurveyHeight,1600),setTimeout(a.fixSurveyHeight,3200),a._interviewStarted=!0)}};a.hideSnaxElements(),a.hideQuestions(),a.addSurveyLoader(),slm.init(),slm.readyCallback(()=>{slm.trigger("slm.snax.loading"),slm.log("SurveyLock.me Snax addon:: Loading interview");const o=slm.createSurveywall({parent:a.getSurveyBlock(),brand:slmSnaxConfig.brand,explainer:slmSnaxConfig.explainer});o.on("load",function(e){slm.trigger("slm.snax.loaded",e.status),slm.log("SurveyLock.me Snax addon:: Interview loaded. Status: "+e.status),a.showCTA(()=>("monetizable"===e.status?(a.removeCTA(),a.addSurveyLoader(l.loaderCoverClass),o.startInterview()):"earnedCredit"===e.status?a.showResults("slm-snax-taken"):a.showResults("slm-snax-unavailable"),!1))}),o.on("interviewStart",function(){slm.trigger("slm.snax.started"),slm.log("SurveyLock.me Snax addon:: Interview started"),a.getSurveyBlock().find(l.surveyIframeSelector).on("load",a.showInterview),setTimeout(a.showInterview,1e3)}),o.on("interviewComplete",function(){slm.trigger("slm.snax.completed"),slm.log("SurveyLock.me Snax addon:: Interview completed"),a.showResults("slm-snax-completed")}),o.on("interviewAbandon",function(){slm.trigger("slm.snax.abandoned"),slm.log("SurveyLock.me Snax addon:: Interview abandoned"),a.showResults("slm-snax-abandoned")}),o.on("interviewSkip",function(){slm.trigger("slm.snax.skipped"),slm.log("SurveyLock.me Snax addon:: Interview skipped"),a.showResults("slm-snax-skipped")})}),slm.failCallback(()=>{slm.trigger("slm.snax.failed"),slm.log("SurveyLock.me Snax addon:: Survey failed"),a.showResults("slm-snax-failed")})})(a,o,t),slm.applyCallbacks())}),a(document).on("slm.snax.loaded",function(e,o){slm.gtag("event",o,{event_category:"SurveyLock - Snax",event_label:window.location.href})}).on("slm.snax.started",function(){slm.gtag("event","Interview started",{event_category:"SurveyLock - Snax",event_label:window.location.href})}).on("slm.snax.completed",function(){slm.gtag("event","Interview completed",{event_category:"SurveyLock - Snax",event_label:window.location.href}),slm.fbq("track","Lead")}).on("slm.snax.abandoned",function(){slm.gtag("event","Interview abandoned",{event_category:"SurveyLock - Snax",event_label:window.location.href})}).on("slm.snax.failed",function(){slm.gtag("event","Survey failed",{event_category:"SurveyLock - Snax",event_label:window.location.href})})}),slm.log("SurveyLock.me Snax addon initialized")})();