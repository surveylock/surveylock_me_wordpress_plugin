(()=>{const r={loaderContainerSelector:"#slm-loader-container-snax",loaderHolderSelector:".slm-loader-holder",loadingClass:"slm-loading",loaderCoverClass:"slm-cover",ctaContainerSelector:"#slm-cta-container-snax",ctaHolderSelector:".slm-cta-holder",ctaButtonSelector:"[data-slm-cta]",surveyBlockClass:"slm-snax-survey-holder",additionalElementsSelector:".g1-newsletter",resultsSelector:".snax-quiz-results",surveyIframeSelector:slm.getSelector("LnN1cnZhdGEtZWxlbWVudC1jb250YWluZXIgaWZyYW1l")};jQuery(function(s){s(document).on("resultsShown",function(e){const o=s(e.target),l=o.find("> .quiz > .snax-quiz-questions-wrapper");o.length&&((l,e,o)=>{const s={_interviewStarted:!1,_surveyBlock:!1,_initSurveyBlock:()=>{!1===s._surveyBlock&&(s._surveyBlock=l("<div />",{class:r.surveyBlockClass}).insertAfter(e))},getSnaxContainer:()=>e,getSurveyBlock:()=>(s._initSurveyBlock(),s._surveyBlock),showCTA:e=>{s.removeCTA();const o=l(r.ctaContainerSelector).find(r.ctaHolderSelector).clone();s.getSurveyBlock().prepend(o),s.removeSurveyLoader(),o.on("click",r.ctaButtonSelector,e)},removeCTA:(e=!1)=>{const o=s.getSurveyBlock().find(r.ctaHolderSelector);e?o.fadeOut("fast",o.remove):o.remove()},hideQuestions:()=>{o.hide()},hideSnaxElements:()=>{s.getSnaxContainer().fadeOut("fast",()=>{l([document.documentElement,document.body]).animate({scrollTop:Math.max(s.getSurveyBlock().offset().top-150,0)},1e3)}),l(r.additionalElementsSelector).fadeOut("fast")},addSurveyLoader:(e="")=>{s.removeSurveyLoader(),s.getSurveyBlock().prepend(l(r.loaderContainerSelector).find(r.loaderHolderSelector).clone()).addClass(r.loadingClass).addClass(e)},removeSurveyLoader:(e=!1)=>{const o=s.getSurveyBlock().find(r.loaderHolderSelector);e?o.fadeOut("fast",()=>{s.getSurveyBlock().removeClass(r.loadingClass).removeClass(r.loaderCoverClass),o.remove()}):(s.getSurveyBlock().removeClass(r.loadingClass).removeClass(r.loaderCoverClass),o.remove()),s.getSurveyBlock().removeClass(r.loadingClass).removeClass(r.loaderCoverClass).find(r.loaderHolderSelector).remove()},showResults:(e="")=>{s.removeCTA(),s.getSurveyBlock().addClass(e),s.addSurveyLoader(),s.getSurveyBlock().fadeOut("fast",()=>{s.getSnaxContainer().find(r.resultsSelector).addClass("slm-snax-show"),s.getSnaxContainer().hide().fadeIn("fast"),l(r.additionalElementsSelector).fadeIn("fast"),s.getSurveyBlock().remove()})},fixSurveyHeight:()=>{s.getSurveyBlock().height(700);const e=s.getSurveyBlock().find(r.surveyIframeSelector);parseInt(e.height(),10)<800&&e.height("700px")},showInterview:()=>{!1===s._interviewStarted&&(s.removeCTA(),s.removeSurveyLoader(!0),s.fixSurveyHeight(),s._interviewStarted=!0)}};s.hideSnaxElements(),s.hideQuestions(),s.addSurveyLoader(),slm.init(),slm.readyCallback(()=>{slm.log("SurveyLock.me Snax addon:: Loading Survey");const o=slm.createSurveywall({parent:s.getSurveyBlock(),brand:slmSnaxConfig.brand,explainer:slmSnaxConfig.explainer});o.on("load",function(e){slm.trigger("slm.snax.loaded"),slm.log("SurveyLock.me Snax addon:: Survey loaded. Status: "+e.status),slm.trigger("slm.snax.status",e.status),s.showCTA(()=>("monetizable"===e.status?(s.removeCTA(),s.addSurveyLoader(r.loaderCoverClass),o.startInterview()):"earnedCredit"===e.status?s.showResults("slm-snax-taken"):s.showResults("slm-snax-unavailable"),!1))}),o.on("interviewStart",function(){slm.trigger("slm.snax.started"),slm.log("SurveyLock.me Snax addon:: Survey started"),s.getSurveyBlock().find(r.surveyIframeSelector).on("load",s.showInterview),setTimeout(s.showInterview,1e3)}),o.on("interviewComplete",function(){slm.trigger("slm.snax.completed"),slm.log("SurveyLock.me Snax addon:: Survey completed"),s.showResults("slm-snax-completed")}),o.on("interviewAbandon",function(){slm.trigger("slm.snax.abandoned"),slm.log("SurveyLock.me Snax addon:: Survey abandoned"),s.showResults("slm-snax-abandoned")}),o.on("interviewSkip",function(){slm.trigger("slm.snax.skipped"),slm.log("SurveyLock.me Snax addon:: Survey skipped"),s.showResults("slm-snax-skipped")})}),slm.failCallback(()=>{slm.trigger("slm.snax.failed"),slm.log("Survey failed to load"),s.showResults("slm-snax-failed")})})(s,o,l)})}),slm.log("SurveyLock.me Snax addon initialized")})();