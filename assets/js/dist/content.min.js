(()=>{const r={blockSelector:".slm-lock",loaderContainerSelector:"#slm-loader-container-content",loaderHolderSelector:".slm-loader-holder",loadingClass:"slm-loading",loaderCoverClass:"slm-cover",surveyBlockClass:"slm-content-survey-holder",surveyIframeSelector:slm.getSelector("LnN1cnZhdGEtZWxlbWVudC1jb250YWluZXIgaWZyYW1l"),ctaContainerSelector:"#slm-cta-container-content",ctaHolderSelector:".slm-cta-holder",ctaButtonSelector:"[data-slm-cta]",logoTooltipSelector:".slm-lock-logo-tooltip"};jQuery(function(e){const o=e(r.blockSelector);o.length&&o.each(function(){((t,e)=>{const l={_interviewStarted:!1,_surveyBlock:!1,_initSurveyBlock:()=>{!1===l._surveyBlock&&(l._surveyBlock=t("<div />",{class:r.surveyBlockClass}).prependTo(e),e.find(r.logoTooltipSelector).css("max-width",parseInt(l._surveyBlock.width(),10)-80))},getDataBlock:()=>e,getSurveyBlock:()=>(l._initSurveyBlock(),l._surveyBlock),showCTA:e=>{l.removeCTA();const o=t(r.ctaContainerSelector).find(r.ctaHolderSelector).clone();l.getSurveyBlock().prepend(o),l.removeSurveyLoader(),o.on("click",r.ctaButtonSelector,e)},removeCTA:(e=!1)=>{const o=l.getSurveyBlock().find(r.ctaHolderSelector);e?o.fadeOut("fast",o.remove):o.remove()},addSurveyLoader:(e="")=>{l.removeSurveyLoader(),l.getSurveyBlock().prepend(t(r.loaderContainerSelector).find(r.loaderHolderSelector).clone()).addClass(r.loadingClass).addClass(e)},removeSurveyLoader:(e=!1)=>{const o=l.getSurveyBlock().find(r.loaderHolderSelector);e?o.fadeOut("fast",()=>{l.getSurveyBlock().removeClass(r.loadingClass).removeClass(r.loaderCoverClass),o.remove()}):(l.getSurveyBlock().removeClass(r.loadingClass).removeClass(r.loaderCoverClass),o.remove()),l.getSurveyBlock().removeClass(r.loadingClass).removeClass(r.loaderCoverClass).find(r.loaderHolderSelector).remove()},showData:(e="")=>{l.removeCTA(),l.getSurveyBlock().addClass(e),l.addSurveyLoader(),l.getSurveyBlock().fadeOut("fast",()=>{l.getDataBlock().hide().height("").addClass("slm-content-show").fadeIn("fast"),l.getSurveyBlock().remove()})},fixSurveyHeight:()=>{const e=l.getSurveyBlock().find(r.surveyIframeSelector);"1"!==slmContentConfig.in_popup&&parseInt(l.getSurveyBlock().height(),10)<700&&(l.getSurveyBlock().height("700px"),l.getDataBlock().height("700px")),parseInt(e.height(),10)<800&&e.height("700px")},showInterview:()=>{!1===l._interviewStarted&&(l.removeSurveyLoader(!0),l.fixSurveyHeight(),l._interviewStarted=!0)}};l.addSurveyLoader(),slm.init(),slm.readyCallback(()=>{slm.log("SurveyLock.me Content addon:: Loading Survey");const e={brand:slmContentConfig.brand,explainer:slmContentConfig.explainer};"1"!==slmContentConfig.in_popup&&(e.parent=l.getSurveyBlock());const o=slm.createSurveywall(e);o.on("load",function(e){slm.trigger("slm.content.loaded"),slm.log("SurveyLock.me Content addon:: Survey loaded. Status: "+e.status),slm.trigger("slm.content.status",e.status),l.showCTA(()=>("monetizable"===e.status?(l.removeCTA(),l.fixSurveyHeight(),o.startInterview()):"earnedCredit"===e.status?l.showData("slm-content-taken"):l.showData("slm-content-unavailable"),!1))}),o.on("interviewStart",function(){slm.trigger("slm.content.started"),slm.log("SurveyLock.me Content addon:: Survey started"),l.getSurveyBlock().find(r.surveyIframeSelector).on("load",l.showInterview),setTimeout(l.showInterview,1e3)}),o.on("interviewComplete",function(){slm.trigger("slm.content.completed"),slm.log("SurveyLock.me Content addon:: Survey completed"),l.showData("slm-content-completed")}),o.on("interviewAbandon",function(){slm.trigger("slm.content.abandoned"),slm.log("SurveyLock.me Content addon:: Survey abandoned"),l.showData("slm-content-abandoned")}),o.on("interviewSkip",function(){slm.trigger("slm.content.skipped"),slm.log("SurveyLock.me Content addon:: Survey skipped"),l.showData("slm-content-skipped")})}),slm.failCallback(()=>{slm.trigger("slm.content.failed"),slm.log("Survey failed to load"),l.showData("slm-content-failed")})})(e,e(this))})}),slm.log("SurveyLock.me Content addon initialized")})();