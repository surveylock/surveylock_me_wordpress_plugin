(()=>{const l={blockSelector:".slm-lock",loaderContainerSelector:"#slm-loader-container-content",loaderHolderSelector:".slm-loader-holder",loadingClass:"slm-loading",loaderCoverClass:"slm-cover",surveyBlockClass:"slm-content-survey-holder",surveyIframeSelector:slm.getSelector("LnN1cnZhdGEtZWxlbWVudC1jb250YWluZXIgaWZyYW1l"),ctaContainerSelector:"#slm-cta-container-content",ctaHolderSelector:".slm-cta-holder",ctaButtonSelector:"[data-slm-cta]",logoTooltipSelector:".slm-lock-logo-tooltip",heightFixed:!1};jQuery(function(e){const t=e(l.blockSelector);t.length&&(slm.init(),t.each(function(){((o,e)=>{const n={_interviewStarted:!1,_surveyBlock:!1,_initSurveyBlock:()=>{!1===n._surveyBlock&&(n._surveyBlock=o("<div />",{class:l.surveyBlockClass}).prependTo(e),e.find(l.logoTooltipSelector).css("max-width",parseInt(n._surveyBlock.width(),10)-80))},getDataBlock:()=>e,getSurveyBlock:()=>(n._initSurveyBlock(),n._surveyBlock),showCTA:e=>{n.removeCTA();const t=o(l.ctaContainerSelector).find(l.ctaHolderSelector).clone();n.getSurveyBlock().prepend(t),n.removeSurveyLoader(),t.on("click",l.ctaButtonSelector,e)},removeCTA:(e=!1)=>{const t=n.getSurveyBlock().find(l.ctaHolderSelector);e?t.fadeOut("fast",t.remove):t.remove()},addSurveyLoader:(e="")=>{n.removeSurveyLoader(),n.getSurveyBlock().prepend(o(l.loaderContainerSelector).find(l.loaderHolderSelector).clone()).addClass(l.loadingClass).addClass(e)},removeSurveyLoader:(e=!1)=>{const t=n.getSurveyBlock().find(l.loaderHolderSelector);e?t.fadeOut("fast",()=>{n.getSurveyBlock().removeClass(l.loadingClass).removeClass(l.loaderCoverClass),t.remove()}):(n.getSurveyBlock().removeClass(l.loadingClass).removeClass(l.loaderCoverClass),t.remove()),n.getSurveyBlock().removeClass(l.loadingClass).removeClass(l.loaderCoverClass).find(l.loaderHolderSelector).remove()},showData:(e="")=>{n.removeCTA(),n.getSurveyBlock().addClass(e),n.addSurveyLoader(),n.getSurveyBlock().fadeOut("fast",()=>{n.getDataBlock().hide().height("").css("max-height","").addClass("slm-content-show").fadeIn("fast"),n.getSurveyBlock().remove()})},fixSurveyHeight:()=>{const e=n.getSurveyBlock().find(l.surveyIframeSelector);l.heightFixed||("1"!==slmContentConfig.in_popup&&parseInt(n.getSurveyBlock().height(),10)<700&&(n.getSurveyBlock().height("700px"),n.getDataBlock().height("700px").css("max-height","700px")),parseInt(e.height(),10)<800&&(e.height("700"),l.heightFixed=!0))},showInterview:()=>{!1===n._interviewStarted&&(n.removeSurveyLoader(!0),n.fixSurveyHeight(),setTimeout(n.fixSurveyHeight,600),setTimeout(n.fixSurveyHeight,1600),setTimeout(n.fixSurveyHeight,3200),n._interviewStarted=!0)}};n.addSurveyLoader(),slm.readyCallback(()=>{slm.log("SurveyLock.me Content Integration:: Loading interview");const e={brand:slmContentConfig.brand,explainer:slmContentConfig.explainer};"1"!==slmContentConfig.in_popup&&(e.parent=n.getSurveyBlock());const t=slm.createSurveywall(e);t.on("load",function(e){slm.trigger("slm.content.loaded",e.status),slm.log("SurveyLock.me Content Integration:: Interview loaded. Status: "+e.status),n.showCTA(()=>("monetizable"===e.status?(n.removeCTA(),n.fixSurveyHeight(),t.startInterview()):"earnedCredit"===e.status?n.showData("slm-content-taken"):n.showData("slm-content-unavailable"),!1))}),t.on("interviewStart",function(){slm.trigger("slm.content.started"),slm.log("SurveyLock.me Content Integration:: Interview started"),n.getSurveyBlock().find(l.surveyIframeSelector).on("load",n.showInterview),setTimeout(n.showInterview,1e3)}),t.on("interviewComplete",function(){slm.trigger("slm.content.completed"),slm.log("SurveyLock.me Content Integration:: Interview completed"),n.showData("slm-content-completed")}),t.on("interviewAbandon",function(){slm.trigger("slm.content.abandoned"),slm.log("SurveyLock.me Content Integration:: Interview abandoned"),n.showData("slm-content-abandoned")}),t.on("interviewSkip",function(){slm.trigger("slm.content.skipped"),slm.log("SurveyLock.me Content Integration:: Interview skipped"),n.showData("slm-content-skipped")})}),slm.failCallback(()=>{slm.trigger("slm.content.failed"),slm.log("SurveyLock.me Content Integration:: Survey failed"),n.showData("slm-content-failed")})})(e,e(this))}),slm.applyCallbacks()),e(document).on("slm.content.loaded",function(e,t){slm.gtag("event",t,{event_category:"SurveyLock - Content",event_label:window.location.href})}).on("slm.content.started",function(){slm.gtag("event","Interview started",{event_category:"SurveyLock - Content",event_label:window.location.href})}).on("slm.content.completed",function(){slm.gtag("event","Interview completed",{event_category:"SurveyLock - Content",event_label:window.location.href}),slm.fbq("track","Lead")}).on("slm.content.abandoned",function(){slm.gtag("event","Interview abandoned",{event_category:"SurveyLock - Content",event_label:window.location.href})}).on("slm.content.failed",function(){slm.gtag("event","Survey failed",{event_category:"SurveyLock - Content",event_label:window.location.href})})}),slm.log("SurveyLock.me Content addon initialized")})();